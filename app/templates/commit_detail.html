<!DOCTYPE html>
<html>
<head>
    <title>Commit Details - {{ commit.name }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    {# Prefer showing the commit message as the title; fall back to short SHA #}
    <h1>Commit: {{ commit.commitMessage if commit.commitMessage else commit.name[:7] }}</h1>
    <ul>
        <li><strong>Full SHA:</strong> {{ commit.name }}</li>
    </ul>
    <ul>
        <li><strong>IRI:</strong> {{ commit.iri }}</li>
        {% if commit.commitMessage %}
        <li><strong>Message:</strong> {{ commit.commitMessage }}</li>
        {% endif %}
        {% if commit.timestamp %}
        <li><strong>Date:</strong> {{ commit.timestamp }}</li>
        {% endif %}
        {% if commit.authoredBy %}
        <li>
            <strong>Author(s):</strong>
            <ul>
                {% for user in commit.authoredBy %}
                    <li>
                        <a href="{{ url_for('user_detail', user_name=user.name) }}">{{ user.name }}</a>
                    </li>
                {% endfor %}
            </ul>
        </li>
        {% endif %}
        {% if commit.hasParent %}
        <li>
            <strong>Parent(s):</strong>
            <ul>
                {% for parent in commit.hasParent %}
                    <li>
                        {# Show parent commit message when present, otherwise short SHA #}
                        {% set parent_label = parent.commitMessage if parent.commitMessage else parent.name[:7] %}
                        <a href="{{ url_for('commit_detail', commit_name=parent.name) }}">{{ parent_label }}</a>
                        <small>({{ parent.name[:7] }})</small>
                    </li>
                {% endfor %}
            </ul>
        </li>
        {% endif %}
    </ul>
    <a href="{{ url_for('index') }}">Back to all repositories</a>

    {% if commit.modifiesFile %}
<li>
    <strong>Files Changed:</strong>
    <ul>
        {% for file in commit.modifiesFile %}
            <li>
                <a href="{{ url_for('file_detail', file_name=file.name) }}">{{ file.name }}</a>
            </li>
        {% endfor %}
    </ul>
</li>
{% endif %}
</body>
</html>